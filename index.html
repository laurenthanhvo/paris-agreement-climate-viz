<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DSC 106 – Final Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <!-- main.js imports D3 + TopoJSON as ES modules -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="main.js" defer></script>
</head>
<body>
  <div id="app">
    <div class="top-right-container">
      <a href="writeup.html" class="top-right-btn">Write-Up</a>
    </div>

    <!-- Left / right navigation arrows -->
    <button id="prevSlide" class="nav-arrow nav-arrow-left" aria-label="Previous slide">
      &#10094;
    </button>
    <button id="nextSlide" class="nav-arrow nav-arrow-right" aria-label="Next slide">
      &#10095;
    </button>

    <div class="slides">
      <!-- Slide 0: Title -->
      <section class="slide slide-intro active" data-slide-index="0">
        <div class="intro-content">
          <h1>Paris Agreement &amp; U.S. Seasons</h1>
          <h2>How does global climate policy affect vegetation and land surface temperature?</h2>
          <p>
            As satellites record states from above, the United States joins, leaves, and rejoins the
            Paris Agreement. Are these environmental changes visible when looking at a map?
          </p>
          <p class="intro-hint">
            Press
            <span class="keycap">Enter</span>
            or
            <span class="keycap">→</span>
            to continue
          </p>
        </div>
      </section>

      <!-- Slide 1: Background – What is the Paris Agreement? -->
      <section class="slide slide-text type-slide" data-slide-index="1">
        <div class="centered-text">
          <p class="typewriter"
            data-fulltext='The Paris Climate Agreement is a legally binding international treaty on climate change adopted at the 21st Conference of the Parties (COP21) in Paris in 2015. Its goals are to:'>
          </p>

          <ul class="background-bullets">
            <li>Limit warming to well below 2°C (aim for 1.5°C)</li>
            <li>Cut global emissions rapidly and reach net-zero later this century</li>
            <li>Strengthen national climate plans every 5 years</li>
            <li>Support adaptation and climate resilience</li>
            <li>Provide financial and technological support to developing countries</li>
            <!-- rewording -->
             <li>Reduce greenhouse gas emissions by ~43% by 2030 after peaking in 2025</li>
          </ul>

          <a
            href="https://www.un.org/en/climatechange/paris-agreement"
            target="_blank"
            rel="noopener noreferrer"
            class="primary-link-btn"
          >
            More information at the UN Climate site
          </a>
        </div>
      </section>

      <!-- Slide 2: Interactive timeline of U.S. involvement -->
      <section class="slide slide-viz" id="timelineSlide" data-slide-index="2">
        <div class="slide-inner">
          <div class="slide-header">
            <h2>U.S. Involvement in the Paris Agreement</h2>
            <p>
              The Paris Agreement sets a global temperature goal, but each country chooses how seriously
              to participate. Use the timeline to see how U.S. membership has shifted over time, then
              read primary sources in the summary box below.
            </p>
          </div>

          <!-- Stacked layout: timeline on top, summary underneath -->
          <div class="timeline-stack">
            <!-- Timeline visualization card -->
            <div class="viz-card">
              <h3>Timeline of U.S. Membership</h3>
              <p class="subtitle">
                Scrub across the bar or click the labeled dots to jump to key years. Colors show whether
                the U.S. was in, stepping away from, or outside the Paris Agreement.
              </p>
              <div id="timelineContainer">
                <svg id="timelineSvg"></svg>
              </div>
              <div id="timelineNote" class="timeline-note">
                2015–2025: Move along the bar to explore how U.S. membership has changed.
              </div>
            </div>

            <!-- Summary + sources card -->
            <div class="viz-card timeline-summary-card">
              <h3 id="timelineSummaryTitle">Why This Timeline Matters</h3>
              <p class="subtitle">
                Each highlighted year below links to a primary source so you can see how policy decisions
                were framed at the time.
              </p>
              <p id="timelineSummaryText" class="timeline-summary-text">
                From 2015 onward, the Paris Agreement created a shared framework for limiting warming,
                but the U.S. moved in and out of the treaty. Use the timeline above to jump to a year and
                see what the government was saying &amp; doing about climate commitments.
              </p>
              <div id="timelineSummaryLinks" class="timeline-links">
                <!-- Filled dynamically by main.js -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Slide 3: Seasonal snapshot map + U.S. average seasonal pattern -->
      <section class="slide slide-viz" id="seasonSlide" data-slide-index="3">
        <div class="slide-inner">
          <div class="slide-header">
            <h2>How Do U.S. Seasons Look from Space?</h2>
            <p>
              This view uses MODIS satellite data for NDVI (vegetation greenness) and land surface
              temperature (day and night, in °F). The map shows a seasonal snapshot; the chart shows how
              a typical year unfolds for the U.S. and any state you click.
            </p>
          </div>

          <div class="control-row">
            <div class="control">
              <label for="seasonVarSelect">Variable</label>
              <select id="seasonVarSelect">
                <option value="ndvi">NDVI (Vegetation Greenness)</option>
                <option value="lstDay">Land Surface Temp – Day (°F)</option>
                <option value="lstNight">Land Surface Temp – Night (°F)</option>
              </select>
            </div>

            <div class="control">
              <label for="seasonMonthSelect">Month (for map snapshot)</label>
              <select id="seasonMonthSelect">
                <option value="0">Yearly Average</option>
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
              </select>
            </div>

            <!-- NEW: Year control for the chart AND map -->
            <div class="control">
              <label for="yearSlider">Chart Year: <span id="yearLabel">2014</span></label>
              <div class="slider-with-play">
                <input type="range" id="yearSlider" min="2014" max="2024" value="2014" step="1">
                <button id="playButton" class="play-btn">▶ Play</button>
              </div>
            </div>
          </div>

          <div class="viz-row">
            <!-- Seasonal snapshot map (now updates with year slider) -->
            <div class="viz-card">
              <h3 id="mapTitle">Yearly Average Map</h3>
              <p class="subtitle">
                Each state is colored by the chosen variable, averaged for the selected year and month.
                Click a state to see its full yearly curve on the right. Click again to remove.
              </p>
              <div id="seasonMapContainer">
                <svg id="seasonMapSvg"></svg>
              </div>
              <div id="seasonMapLegend" aria-label="Map legend"></div>
            </div>

            <!-- Yearly chart (now with slider control) -->
            <div class="viz-card">
              <h3 id="seasonTitle">U.S. Average Yearly Pattern</h3>
              <p class="subtitle" id="seasonSubtitle">
                Lines show the yearly averages for the selected variable. Use the year slider to animate through time.
              </p>
              <div id="seasonBarContainer">
                <svg id="seasonBarSvg"></svg>
                <!-- Glowing dot for current year -->
                <div id="yearTracker" class="year-tracker" style="display: none;">
                  <div class="tracker-dot"></div>
                  <div class="tracker-label"></div>
                </div>
              </div>
              <div id="seasonLegend" class="season-legend">
                <div class="legend-item">
                  <span class="legend-color us"></span> U.S. Average
                </div>
                <div class="legend-item" id="legendStateItem" style="display:none;">
                  <span class="legend-color state"></span>
                  <span id="legendStateLabel">Selected State</span>
                </div>
              </div>

              <div class="season-note">
                Tip: Use the Play button to animate through years. The glowing dot shows the current year's value.
              </div>
            </div>
          </div>

          <p class="slide-footnote">
            All values are monthly means across 2014–2024. NDVI is unitless; land surface temperature is in degrees Fahrenheit.
          </p>
        </div>
      </section>

      <!-- Slide 4: Yearly line chart (state vs U.S.) -->
      <section class="slide slide-viz" id="yearlySlide" data-slide-index="4">
        <div class="slide-inner">
          <div class="slide-header">
            <h2>How Do U.S. Seasons Shift Around Paris Agreement Decisions?</h2>
            <p>
              Watch the lines trace yearly averages before and after key Paris Agreement milestones.
              Compare a specific state to the overall U.S. average.
            </p>
          </div>

          <div class="yearly-stack">
            <!-- Chart card -->
            <div class="viz-card yearly-chart-card">
              <div class="yearly-controls-row">
                <div class="control-group">
                  <label for="yearlyVarSelect">Variable</label>
                  <select id="yearlyVarSelect">
                    <option value="ndvi">NDVI (vegetation greenness)</option>
                    <option value="lstDay">Land surface temperature – day (°F)</option>
                  </select>
                </div>

                <div class="control-group">
                  <label for="yearlyStateSelect">Compare to state</label>
                  <select id="yearlyStateSelect">
                    <!-- JS will populate: first option is U.S. only -->
                  </select>
                </div>
              </div>

              <div id="yearlyTrendContainer" class="yearly-trend-container">
                <svg id="yearlyTrendSvg"></svg>
              </div>
              <div id="yearlyLegend" class="yearly-legend">
              <div class="legend-item">
                <span class="legend-color us"></span>
                    U.S. Average
              </div>
              <div class="legend-item" id="yearlyStateLegend" style="display:none;">
                <span class="legend-color state"></span>
                <span id="yearlyStateLegendLabel">Selected State</span>
                </div>
              </div>

              <div class="yearly-tip">
                Tip: Pick a state to compare its line (solid teal) with the U.S. average (solid orange).
                Dashed lines mark years when the U.S. joined, signaled an exit from, left, or rejoined the Paris Agreement.
              </div>
            </div>

            <!-- Explanation card -->
            <div class="viz-card yearly-expl-card">
              <h3 id="yearlyExplTitle">How NDVI (Vegetation Greenness) shifts from 2014–2024</h3>
              <p id="yearlyExplBody">
                This line chart shows the U.S. average NDVI (vegetation greenness) over time. When you choose a state,
                a second line appears so you can see whether that state moves with or against the national pattern.
                Look for bends around 2016–2017 (joining Paris), 2017–2020 (exit signaled), and 2020–2021 (exit in
                effect vs. rejoining).
              </p>
            </div>
          </div>
        </div>
      </section>
      <!-- Slide 5: Future -->
      <section class="slide slide-text type-slide" data-slide-index="5">
        <div class="centered-text">
          <p class="typewriter"
            data-fulltext="The Paris Climate Agreement update as of 2025 is as follows:">
          </p>

          <ul class="background-bullets">
            <li>In January 2025, President Trump signed an order to withdraw the U.S. from the Paris Climate Agreement again.</li>
            <li>The U.S. sent formal notice to the UN, and the exit will take one year to become official.</li>
            <li>Many states and cities say they will still follow Paris-aligned climate goals.</li>
            <li>International groups warn the withdrawal weakens global climate cooperation.</li>
          </ul>
          <p class="typewriter"
            data-fulltext="What would it take to get to this target?">
          </p>
          <a
            href="https://www.congress.gov/crs-product/R48504"
            target="_blank"
            rel="noopener noreferrer"
            class="primary-link-btn"
          >
            More information at the Congress site
          </a>
          
        </div>
      </section>
      <!-- Slide 6: Play Area – emissions projection -->
      <section class="slide slide-viz" id="slide5" data-slide-index="6">
        <div class="slide-inner">
          <div class="slide-header">
            <h2>Play Area: Visualizing the Warming Path</h2>
            <p class="slide-subtitle">
              Use a simple prediction model to see whether global emissions are on pace
              for the 43% drop by 2030.
            </p>
          </div>

          <!-- STACKED LAYOUT FOR SLIDE 6 -->
          <div class="slide-grid-5">
            <!-- Left card: chart + controls -->
            <div class="viz-card slide5-left-card">
              <div class="card-header-row">
                <div class="card-title">Global greenhouse gas emissions (GtCO₂e) vs. 2030 pathway</div>
                <div class="card-controls">
                  <label for="projectionModelSelect">
                    Model:
                    <select id="projectionModelSelect">
                      <option value="linear">Linear trend (business-as-usual)</option>
                      <option value="faster-cut">Hypothetical faster cuts</option>
                    </select>
                  </label>
                </div>
              </div>

              <div id="projectionContainer">
                <svg id="projectionSvg"></svg>
              </div>
              <p id="projectionAnno" class="projection-anno-text"></p>
              <!-- Legend -->
              <div class="projection-legend">
                <div class="legend-item">
                  <span class="legend-swatch legend-swatch-actual"></span>
                  <span>Actual data (2010–2024)</span>
                </div>
                <div class="legend-item">
                  <span class="legend-swatch legend-swatch-model"></span>
                  <span>Model projection</span>
                </div>
                <div class="legend-item">
                  <span class="legend-swatch legend-swatch-target"></span>
                  <span>Paris-aligned pathway</span>
                </div>
              </div>

              <!-- Slider -->
              <div class="slider-row" id="ghgSliderRow">
                <label for="projectionYearSlider" id="projectionYearLabel">
                  Focus year: 2030
                </label>
                <input id="projectionYearSlider" type="range" />
              </div>

              <p id="ghgHint" class="chart-hint">
                Hover or drag across the chart to inspect a year. Compare the model path
                (pink) to the Paris-aligned path (green) and the actual data through
                2024 (orange).
              </p>
            </div>

            <!-- Right card: explanation -->
            <div class="viz-card slide5-right-card">
              <h3 id="projectionExplTitle">Are We On Track for 2030?</h3>
              <p id="projectionExplBody"></p>
            </div>
          </div>
        </div>
      </section>

      <!-- Slide 7: Top Emitters Pie Chart -->

      <section class="slide" id="slide7">
          <div class="slide7-box">
              <h2>Top Emitters – Pie Chart</h2>

              <label for="topEmittersYear">Select Year:</label>
              <select id="topEmittersYear"></select>

              <div id="topEmittersContainer">
                  <canvas id="topEmittersChart" width="600" height="420"></canvas>
              </div>
          </div>
      </section>


      <!-- Slide 8: Takeways -->
      <section class="slide slide-text type-slide" data-slide-index="9">
            <div class="centered-text">
              <h2 class="slide-title">Key Takeaways</h2>
            <li>The U.S. is not on track for the Paris Agreement’s 43% emissions cut by 2030 under current trends.</li>
            <li>Policy swings (join → withdraw → rejoin) create uncertainty and slow long-term progress.</li>
            <li>U.S. seasonal data (NDVI and LST) already show warming patterns—hotter summers, shifting vegetation.</li>
            <li>Global climate policy shapes future warming, which then shapes local U.S. environmental conditions.</li>
          </ul>

          <p class="callout-text">
            Every year we delay makes the slope steeper. The next few years decide the curve.
          </p>
        </div>
      </section>

    </div>

    <!-- Slide pager dots -->
    <div id="pager" class="pager"></div>
  </div>

  <!-- shared tooltip for charts -->
  <div id="tooltip" class="tooltip" style="opacity:0;"></div>
  
  <!-- State hover stats -->
  <div id="stateHoverStats" class="state-hover-stats"></div>
  
</body>
</html>